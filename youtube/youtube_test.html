<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>YouTube Player</title>
</head>
<body>
<div id="container"></div>
<div id="player"></div>
<script src="js/youtubeapi.js"></script>
<script src="js/three.min.js"></script>
<script src="js/CSS3DRenderer.js"></script>

<script>
var camera, scene, renderer;



var videoIdList = ["gdt_r9O6n9o", "xSRmhiMS78Y", "b6Svvc8W_Qs", "A04la9SBjcs", "wUd8XvvY1vM", "osw9PDdsMZQ", "-nWueMyuILk"];
var index = 0;
//var player = null;
var options ={
    host: 'http://www.youtube.com',
    width: 640,
    height: 390,
    videoId: videoIdList[0],
    playerVars: {
        cc_load_policy: 0,
        autoplay: 1,
        controls: 0,
        html5: 1,
        modestbranding:1,
        showinfo:0,
        rel:0,
        origin: document.domain
    },
    events: {
        onReady: onPlayerReady,
        onStateChange: onPlayerStateChange
    }
};

var player = new YT.Player( 'player', options );
//window.onload = onYouTubeIframeAPIReady;

//function onYouTubeIframeAPIReady() {
 //   player = new YT.Player( 'player', options );
//}

function onPlayerReady(event) {
    event.target.playVideo();
    //console.log(event.target.getIframe().contentWindow.postMessage() )
    console.log(event.target.getIframe().getElementsByClassName("video-stream html5-main-video"));
    //console.log(event.target.getIframe().contentWindow.getElementsByClassName("video-stream html5-main-video") )
    //console.log('video:', event.target.getIframe().getElementsByClassName("video-stream html5-main-video")[0]);

   // console.log(event.target.getIframe().contentWindow.getElementsByClassName("video-stream html5-main-video") )
    //console.log('yoooo', event.target.getVideoEmbedCode());

    /*var embedCode = event.target.getVideoEmbedCode();https://s.ytimg.com/yts/jsbin/html5player-fr_FR-vfloHxRkc/html5player.js
    if (document.getElementById('embed-code')) {
        document.getElementById('embed-code').innerHTML = embedCode;

        console.log('yoooo', event.target.getVideoEmbedCode());
    }*/
}

function onPlayerStateChange(event) {
    
    if(event.data == YT.PlayerState.ENDED) {
        index = index + 1;
        if (index < videoIdList.length) {
            player.loadVideoById(videoIdList[index]);
        }    
    }          
}

init();
animate();

function init() {

            camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 5000 );
            camera.position.y = - 25;

            scene = new THREE.Scene();

            var object = new THREE.CSS3DObject( player.getIframe() );
            scene.add( object );

            renderer = new THREE.CSS3DRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            renderer.domElement.style.position = 'absolute';
            renderer.domElement.style.top = 0;
            document.getElementById( 'container' ).appendChild( renderer.domElement );
}

function animate() {
    requestAnimationFrame( animate );
    renderer.render( scene, camera );
}
</script>
</body>
</html>
