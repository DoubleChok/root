<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Phase 1</title>
	<script src="js/vendor/dat.gui.min.js"></script>
	<script src="js/vendor/three.min.js"></script>
	<script src="js/vendor/OrbitControls.js"></script>
	<script src="js/vendor/sea3d.min.js"></script>
	<script src="js/Neuro.js"></script>
</head>
<body>
<div id="canvas-container"></div>
<div id="info">Phase 1 <br>neuro particule a partir d'un objet 3D</div>
<script>
document.body.style.cssText ='margin: 0px; padding: 0px; overflow: hidden; background:#222; color:#FFF; font-family:Monospace; font-size:10px;';

var container =document.getElementById('canvas-container');
container.style.cssText ='position:absolute; display: block; top:0; left:0;';

var txt =document.getElementById('info');
txt.style.cssText ='position:absolute; display: block; top:10px; left:10px;';


var scene, camera, cameraCtrl, renderer;
scene = new THREE.Scene();
// ---- camera
camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
// camera orbit control
cameraCtrl = new THREE.OrbitControls(camera, container);
cameraCtrl.object.position.y = 100;
cameraCtrl.update();
cameraCtrl.target.set(0,50,0)

// ---- renderer
renderer = new THREE.WebGLRenderer({antialias: true , alpha: false});
renderer.setSize(window.innerWidth, window.innerHeight);
container.appendChild(renderer.domElement);

// ---- stats
//stats = new Stats();
//container.appendChild( stats.domElement );

// ---- scene settings
var scene_settings = {
	pause: false,
	bgColor: 0x2A2A2A
};

// Neural Net
var neuralNet = new Neuro.NetWork(this);

var gui = new dat.GUI();
//gui.width = 300;

var gui_info = gui.addFolder('Info');
gui_info.add(neuralNet, 'numNeurons').name('Neurons');
gui_info.add(neuralNet, 'numAxons').name('Axons');
gui_info.add(neuralNet, 'numSignals', 0, neuralNet.limitSignals).name('Signals');
gui_info.autoListen = false;

var gui_settings = gui.addFolder('Settings');
gui_settings.add(neuralNet, 'currentMaxSignals', 0, neuralNet.limitSignals).name('Max Signals');
gui_settings.add(neuralNet.particlePool, 'pSize', 0.2, 2).name('Signal Size');
gui_settings.add(neuralNet, 'signalMinSpeed', 0.01, 0.1, 0.01).name('Signal Min Speed');
gui_settings.add(neuralNet, 'signalMaxSpeed', 0.01, 0.1, 0.01).name('Signal Max Speed');
gui_settings.add(neuralNet, 'neuronSize', 0, 2).name('Neuron Size');
gui_settings.add(neuralNet, 'neuronOpacity', 0, 1.0).name('Neuron Opacity');
gui_settings.add(neuralNet, 'axonOpacityMultiplier', 0.0, 5.0).name('Axon Opacity Mult');
gui_settings.addColor(neuralNet.particlePool, 'pColor').name('Signal Color');
gui_settings.addColor(neuralNet, 'neuronColor').name('Neuron Color');
gui_settings.addColor(neuralNet, 'axonColor').name('Axon Color');
gui_settings.addColor(scene_settings, 'bgColor').name('Background');

//gui_info.open();
gui_settings.open();

function updateNeuralNetworkSettings() {
	neuralNet.updateSettings();
}

for (var i in gui_settings.__controllers) {
	gui_settings.__controllers[i].onChange(updateNeuralNetworkSettings);
}

function updateGuiInfo() {
	for (var i in gui_info.__controllers) {
		gui_info.__controllers[i].updateDisplay();
	}
}


loop();

function loop(){
	requestAnimationFrame(loop);
	renderer.setClearColor(scene_settings.bgColor, 1);
	if (!scene_settings.pause) {
		neuralNet.update();
		updateGuiInfo();
	}
	renderer.render(scene, camera);
}

window.addEventListener('resize', function onWindowResize() {
	var w = window.innerWidth;
	var h = window.innerHeight;
	camera.aspect = w / h;
	camera.updateProjectionMatrix();
	renderer.setSize(w, h);
}, false);

</script>

</body>
</html>







